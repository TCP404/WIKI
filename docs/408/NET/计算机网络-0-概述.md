---
title: '计算机网络 [0-概述]'
seotitle: '计算机网络 [0-概述]'
pin: false
mathjax: true
abbrlink: f56d3ab8
date: 2021-07-16 15:51:46
updated: 2021-07-16 18:13:26
tags: 
  - 七层模型
  - OSI 模型
  - 计算机网络
categories: [408, NET]
thumbnail:
headimg:
---

计算机网络一览~

<!--more-->

# 概述

## 计算机网络
### 定义
计算机网络是**互联**的、**自治**的计算机集合。

- 互联：互联互通、
- 自治：无主从关系，相互独立。有通信，但不能控制对方

### 计算机网络的功能

1. **数据通信**：数据可以在信道上传输，使得硬件设备可以通信
2. **资源共享**：硬件、软件、数据的共享
3. 分布式处理：多台计算机各自承担同一工作任务的不同部分
4. 提高可靠性：一台主机挂了，另外一台可以顶上。
5. 负载均衡

### 组成
#### 组成部分
硬件、软件、协议

#### 工作方式
分为边缘部分和核心部分
- 边缘部分：各种主机、终端机、服务器等；用于直接使用，分`C/S方式`和`P2P方式`
- 核心部分：各种路由器、集线器等；为边缘部分服务

#### 功能组成

- 通信子网：实现数据通信
- 资源子网：实现资源共享/数据处理
![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/20210109163200605_13306.png)

### 分类
1. 按分布范围分：
    1. 广域网 WAN - 使用交换技术
    2. 城域网 MAN
    3. 局域网 LAN - 广播技术
    4. 个人区域网 PAN
2. 按使用者分
    1. 公用网 - 中国电信、移动、联通
    2. 专用网 - 军队、政府、银行等使用的专用网络，需要一定权限
3. 按交换技术分
    1. 电路交换
    2. 报文交换
    3. 分组交换
4. 按拓扑结构分
    1. 总线型
    2. 星型
    3. 环形
    4. 网状型 - 常用于广域网
5. 按传输技术分
    1. 广播式网络 - 共享公共通信信道
    2. 点对点网络 - 使用**分组存储转发**和**路由选择**机制

## 标准化工作
### 分类
- 法定标准：由权威机构制定的正式的、合法的标准，如OSI
- 事实标准：某些公司的产品在竞争中占据主流，时间长了，这些产品中的协议和技术就成了标准，如 TCP/IP

### RFC
RFC (Request For Comments) —— 互联网标准的形式

RFC要上升为互联网正式标准的四个阶段：
1. 互联网草案 (Internet Draft) : 这个阶段还不是RFC文档
2. 建议标准 (Proposed Standard) : 被收录后就进入这个阶段，成为RFC文档，然后进一步完善成为草案标准
3. 草案标准 (Draft Standard) : 完善以后就形成一个草案标准，交由IETF、IAB 审核
4. 互联网标准 (Internet Standard) : 通过审核以后就正式成为互联网标准。

> 2013年后取消了草案标准这一阶段，被收录为RFC文档完善审核通过后直接成为互联网标准。

### 相关组织

|                                 | 主要贡献                      |
| ------------------------------- | ----------------------------- |
| **ISO** 国际标准化组织          | OSI 参考模型、HDLC协议        |
| **ITU** 国际电信联盟            | 指定通信规则                  |
| **IEEE** 国际电气电子工程师协会 | 学术论文、IEEE802系列标准、5G |
| **IETF** Internet工程任务组     | 负责互联网标准制定            |

## 性能指标

### 速率

又称 数据率 或 数据传输率 或 比特率（比特，即 1/0 ，又称“位”）
指连接在计算机网络上的主机在数字信道上传送数据位数的速度。

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/20210109170709637_8154.png)

单位是 b/s、kb/s、Mb/s、Gb/s、TB/s

|      |                                          速率 | 存储容量（1Byte=8bit）           |
| ---- | --------------------------------------------: | -------------------------------- |
| 千   |                             $1kb/s = 10^3b/s$ | $1KB=2^{10}B=1024B=1024\times8b$ |
| 兆   |                  $1Mb/s = 10^3kb/s = 10^6b/s$ | $1MB=2^{10}KB=1024KB$            |
| 吉   |         $1Gb/s = 10^3Mb/s = 10^6kb/s=10^9b/s$ | $1GB=2^{10}MB=1024MB$            |
| 太   | $1Tb/s=10^3Gb/s=10^6Mb/s=10^9kb/s=10^{12}b/s$ | $1TB=2^{10}GB=1024GB$            |



### 带宽（车道数）

> 计算机网络中，带宽表示网络通信线路传送数据的能力，通常指单位时间内从网络中某一点到另一点所能通过的“最高数据率”，即网络设备所支持的最高速度

带宽用来表示网络的通信线路传送数据的能力，通常指单位时间内从网络中的一端到另一端所能通过的“最高数据率”。
单位是 b/s、kb/s、Mb/s、Gb/s、Tb/s
换言之，就是**一秒内我这个设备能传输到信道上的最多的比特数**。



### 吞吐量（车流量）

> 单位时间内通过某个网络（或信道、接口）的数据量。即实际接收到的数据量。

单位是 b/s、kb/s、Mb/s、Gb/s、TB/s

带宽是理想，吞吐量是现实。

带宽指的是最大的发送或接收能力，吞吐量是实际的发送或接收的量。

### 时延

> 指数据从网络的一段传送到另一端所需的时间。也叫延迟、迟延。单位是 s。

时延包括 4 大类：

1. **发送时延**（传输时延）：一堆数据从开始推送到信道上那一刻起，到全部推完，这个动作持续的时间。

    $发送时延 = \frac {数据长度} {信道带宽(发送速率)}$

2. **传播时延**：一堆数据在数据链路上跑到目的地的用时。取决于电磁波传播速度($2\times10^8m/s$)和链路长度

    $传播时延 = \frac {链路长度} {电磁波传播速度}$

3. **排队时延**：数据在经过路由器、交换机等设备时不一定能马上处理，需要等待；排队时延指等待输入/输出链路可用这段时间。

    排队时延包括`等待输入链路时的排队`和`等待输出链路时的排队`。

4. **处理时延**：指排队排到了以后，路由器/交换机等设备对数据进行检错、分析的这段时间。

> 时延 = 发送时延 + 传播时延 + 排队时延 + 处理时延

> 举个例子：从 A 城拉一车水果到 B 城。
>
> 发送时延 = 把水果装到车上的时间
>
> 传播时延 = 把车从 A 城开到 B 城花费的时间
>
> 排队时延 = 车在路上经过安检，在排队等待安检的这段时间
>
> 处理时延 = 被安检这个过程花费的时间



### 时延带宽积

> 时延带宽积 bit = 传播时延 s $\times$ 带宽 bit/s
>
> 时延带宽积又称 **以比特为单位的链路长度**，即某段链路中现在有多少比特。

带宽是最大发送速率，也就是货物装车最快能装多快。

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/20210716135740.png)





### 往返时间RTT

> RTT 指从发送法发送数据开始，到发送方收到接收方的确认（接收方收到数据后立即发送确认）总共经历的时延。

RTT 越大，在收到确认之前，可以发送的数据越多。

RTT 包括 `往返传播时延` = 传播时延$\times$2 + `末端处理时间`

RTT 只管信道上的时延，不管主机上的发送时延。



### 利用率

利用率包括`信道利用率` 和 `网络利用率`。

$信道利用率 = \frac {有数据通过时间} {(有+无)数据通过时间}$

网络利用率 = 信道利用率加权平均值



## 分层

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/20210716144426.png)

- 实体：第 n 层还中的活动元素称为 n 层实体。同一层的实体叫对等实体。
- 协议：为进行网络中的对等实体数据交换而建立的规则、标准或约定，称为网络协议。[水平]
    - 语法：规定传输数据的格式
    - 语义：规定所要完成的功能
    - 同步：规定各种操作的顺序
- 接口(访问服务点，SAP)：上层使用下层服务的入口。
- 服务：下层为相邻上层提供的功能调用。[垂直]

> PDU = PCI + SDU
>
> 数据包 = 上层数据 + 本层协议头

- SDU, Service Data Unit，服务数据单元：为完成用户所要求的功能而应传送的数据。

- PCI, Protocols Control Infomation，协议控制信息：控制协议操作的信息。

- PDU, Protocols Data Unit，协议数据单元：对等层次之间传送的数据单位。



分层的基本原则

1. 各层之间相互**独立**，每层只实现一种相对独立的功能。
2. 每层之间**界面自然清晰**，易于理解，相互交流尽可能少。
3. 结构上可分隔开，每层都采用**最合适的技术**来实现。
4. 保持**下层**对**上层**的独立性，上层单向使用下层提供的服务。
5. 整个分层结构应该能促进标准化工作。



> 网络体系结构是从**功能**上描述计算机网络结构。
>
> 计算机网络体系结构，简称网络体系结构，是分层结构。
>
> 每层遵循某个/某些**网络协议**以完成本层功能。
>
> 计算机网络体系结构是计算机网络的**各层及其协议的集合**。
>
> 第 n 层在向 n+1 层提供服务时，此服务不仅包含第 n 层本身的功能，还包含由下层服务提供的功能。
>
> 仅仅在**相邻层间有接口**，且所提供服务的具体实现细节对上一层完全屏蔽。
>
> 体系结构是**抽象**的，而实现是指能运行的一些软件和硬件。

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/20210716183548.png)

### OSI 网络模型

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/7%E5%B1%82_20210716175720.png)

法定标准：7 层 OSI 参考模型

事实标准：4 层 TCP/IP 参考模型



上面 4 层是**端到端**的通信，下面 3 层是**点到点**的通信。

- **应用层**：所有能和用户交互产生网络流量的程序。典型应用层服务：

    - 文件传输 FTP
    - 电子邮件 SMTP
    - 万维网 HTTP
- **表示层**：用于处理在两个通信系统中交换信息的表示方式（语法和语义）
    - 功能一：数据格式交换
    - 功能二：数据加密解密
    - 功能三：数据压缩和恢复
- **会话层**：向表示层实体/用户进程提供**建立连接**并在连接上**有序**地**传输**数据。这是会话，也是建立同步（SYN）
    - 功能一：建立、管理、终止会话
    - 功能二：使用校验点可使会话在通信失效时从**校验点/同步点**继续恢复通信，实现数据同步。适用于传输大文件。
    - 主要协议：ADSP、ASP
- **传输层**：负责主机中两个进程的通信，即端到端的通信。传输单位是`报文段`或`用户数据报`。
    - 功能一：可靠传输 TCP、不可靠传输 UDP
    - 功能二：差错控制
    - 功能三：流量控制（协调发送端和接收端的速度问题）
    - 功能四：复用分用
        - 复用：多个应用层进程可同时使用下面运输层的服务。
        - 分用：运输层把收到的信息分别交付给上面应用层中相应的进程。
    - 主要协议：TCP、UDP
- **网络层**：主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。传输单位是`数据报`。

    - 数据报和分组的关系是：数据报过长的时候就可以切成很多个分组。
    - 功能一：路由选择（选择最佳路径）
    - 功能二：差错控制
    - 功能三：流量控制（协调发送端和接收端的速度问题）
    - 功能四：拥塞控制。若所有结点都来不及接收分组，而要丢弃大量分组的话，网络就处于拥塞状态。因此要进行拥塞控制。
    - 主要协议：IP、IPX、ICMP、IGMP、ARP、RARP、OSPF。
- **数据链路层**：主要任务是把网络层传下来的数据报**组装成帧**。传输单位是`帧`。
    - 功能一：成帧（定义帧的开始和结束）
    - 功能二：差错控制，包括`帧错`和`位错`
    - 功能三：流量控制
    - 功能四：访问（接入）控制，控制对信道的访问
    - 主要协议：SDLC、HDLC、PPP、STP
- **物理层**：主要任务是在**物理媒体上**实现比特流的**透明传输**。
    - 透明传输：指不管所传数据是什么样的比特组合，都应当能够在链路上传送。
    - 功能一：定义接口特性，如接头有多少引脚、使用多少跟线、电压所少...
    - 功能二：定义传输模式
        - 单工：只能发送或只能接收
        - 半双工：可以发送或接收，但同一时刻只可以一方在发送或接收
        - 全双工：可以在发送的同时也在接收
    - 功能三：定义传输速率
    - 功能四：比特同步
    - 功能五：比特编码
    - 主要协议：Rj45、IEEE 802.3



|            | 主要任务                               | 传输单位          | 主要协议                             |
| ---------- | -------------------------------------- | ----------------- | ------------------------------------ |
| 应用层     | 处理用户交互产生的数据                 | APDU              | HTTP、FTP、DNS                       |
| 表示层     | 处理在两个通信系统中交换信息的表示方式 | PPDU              | JPEG、ASCII                          |
| 会话层     | 建立连接，并在连接上有序地传输数据     | SPDU              | ADSP、ASP                            |
| 传输层     | 负责主机中两个进程的通信               | 报文段/用户数据报 | TCP、UDP                             |
| 网络层     | 源主机到目的主机的数据分组路由与转发   | 数据报            | IP、IPX、ICMP、IGMP、ARP、RARP、OSPF |
| 数据链路层 | 把网络层传下来的数据报组装成帧         | 帧                | SDLC、HDLC、PPP、STP                 |
| 物理层     | 比特传输                               | 比特              | Rj45、IEEE 802.3                     |

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/TCP/IP.gif)

### TCP/IP 网络模型

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/4%E5%B1%82_20210716183806.png)



|        | OSI 模型        | TCP/IP 模型     |
| ------ | --------------- | --------------- |
| 网络层 | 无连接+面向连接 | 无连接          |
| 传输层 | 面向链接        | 无连接+面向连接 |

面向连接：喂你吃东西之前问你要不要吃，然后给你吃。

无连接：直接塞你嘴里。



面向连接分三个阶段：

1. **建立连接**：再此阶段发出一个建立连接的请求；
2. **数据传输**：只有在连接成功建立之后，才能开始数据传输；
3. **释放连接**：数据传输完成后，释放连接。

无连接：直接进行数据传输。



### 5层参考模型

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/5%E5%B1%82_20210716214222.png)

### 数据封装与解封装

![](https://xcdn.loli.top/gh/TCP404/Picgo/blog/illustration-pic/408/NET/20210716213207.png)

