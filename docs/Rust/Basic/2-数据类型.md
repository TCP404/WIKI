# æ•°æ®ç±»å‹

## æ ‡é‡ç±»å‹

| åˆ†ç±»     | ç±»å‹                                                           |
|--------|----------------------------------------------------------------|
| æ•´æ•°ç±»å‹ | i8, i16, i32, i64, i128, isize, u8, 816, u32, u64, u128, usize |
| æµ®ç‚¹ç±»å‹ | f32, f64                                                       |
| å¸ƒå°”ç±»å‹ | bool (true, false)                                             |
| å­—ç¬¦ç±»å‹ | char                                                           |

### æ•´æ•°ç±»å‹
| Length  | Signed | Unsigned |
|---------|--------|----------|
| 8-bit   | i8     | u8       |
| 16-bit  | i16    | u16      |
| 32-bit  | i32    | u32      |
| 64-bit  | i64    | u64      |
| 128-bit | i128   | u128     |
| arch    | isize  | usize    |

#### æ•´æ•°å­—é¢å€¼

| Number literals | Example     |
|-----------------|-------------|
| Decimal         | 98_200      |
| Hex             | 0xff        |
| Octal           | 0o75        |
| Binary          | 0b1111_0011 |
| Byte(u8 only)   | b'A'        |

é™¤äº† byte ç±»å‹å¤–ï¼Œæ‰€æœ‰æ•´æ•°å­—é¢å€¼éƒ½å¯ä»¥ä½¿ç”¨ç±»å‹åç¼€ï¼š
```rust
let x = 9122i16
let y = 0xff_i64
let b = 0b1100_1011u8
```

!!! Tip
    Rust é»˜è®¤æ•´æ•°ç±»å‹ä¸º i32

#### æ•´æ•°æº¢å‡º

æ•´æ•°æº¢å‡ºæŒ‡ï¼šå€¼è¶…è¿‡äº†ç±»å‹çš„æœ€å¤§èŒƒå›´ã€‚

ä¾‹å¦‚ï¼šu8çš„èŒƒå›´æ˜¯ 0ï½255ï¼Œå¦‚æœä½ æŠŠä¸€ä¸ª u8 ç±»å‹å˜é‡è®¾ä¸º 256ï¼Œé‚£ä¹ˆï¼š

- è°ƒè¯•æ¨¡å¼ä¸‹ï¼šRust ä¼šæ£€æŸ¥æ•´æ•°æº¢å‡ºï¼Œåœ¨å‘ç”Ÿæº¢å‡ºæ—¶ panic
- å‘å¸ƒæ¨¡å¼ä¸‹ï¼šRust ä¸ä¼šæ£€æŸ¥æ•´æ•°æº¢å‡ºï¼Œåœ¨å‘ç”Ÿæº¢å‡ºæ—¶è¿›è¡Œã€Œç¯ç»•ã€æ“ä½œï¼š
    - 256 å˜æˆ 0, 257 å˜æˆ 1...
    - ä¸è¿‡ç¨‹åºä¸ä¼š panic

### æµ®ç‚¹ç±»å‹

Rust æµ®ç‚¹ç±»å‹ä½¿ç”¨ IEEE-754 æ ‡å‡†ã€‚

Rust æ”¯æŒå¯¹æµ®ç‚¹ç±»å‹å–ä½™ï¼Œä½†è¦æ±‚ä¸¤è¾¹éƒ½æ˜¯åŒç±»å‹æµ®ç‚¹æ•°æ‰è¡Œï¼Œä¾‹å¦‚ï¼š
```rust
let x: f32 = 1.0
let y: f32 = 0.3
let z = x % y   // z çš„å€¼ä¸º 0.1
```

!!! Tip
    Rust é»˜è®¤æ•´æ•°ç±»å‹ä¸º f64

### å­—ç¬¦ç±»å‹

Rust ä¸­æ‰€æœ‰çš„ Unicode å€¼éƒ½å¯ä»¥ä½œä¸ºå­—ç¬¦ï¼ŒåŒ…æ‹¬å•ä¸ªçš„ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€emoji è¡¨æƒ…ç¬¦å·ç­‰ï¼Œéƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ã€‚

Unicode å€¼çš„èŒƒå›´ä» `U+000 ~ U+D7FF` å’Œ `U+E000 ~ U+10FFFF`ã€‚

å­—ç¬¦åªèƒ½ç”¨ `''` æ¥è¡¨ç¤ºã€‚

!!! example

    ```rust
    fn main() {
        let c = 'z';
        let z = 'â„¤';
        let g = 'å›½';
        let heart_eyed_cat = 'ğŸ˜»';
    }
    ```

!!! Tip
    ç”±äº Unicode éƒ½æ˜¯ 4 ä¸ªå­—èŠ‚ç¼–ç ï¼Œæ‰€ä»¥ Rust ä¸­ä¸€ä¸ªå­—ç¬¦å  4 ä¸ªå­—èŠ‚ã€‚

### å¸ƒå°”ç±»å‹

Rust ä¸­å¸ƒå°”å€¼ä¸º `true` å’Œ `false`ï¼Œè¿™ç‚¹å’Œ Go ç›¸åŒã€‚å¸ƒå°”å€¼å ç”¨ 1 å­—èŠ‚ã€‚ä¸»è¦ç”¨äºæµç¨‹æ§åˆ¶ã€‚

!!! example

    ```rust
    fn main() {
        let t = true;           // ä½¿ç”¨ç±»å‹æ¨æ–­
        let f: bool = false;    // æ˜¾å¼çš„ç±»å‹æ ‡æ³¨ f ä¸ºå¸ƒå°”ç±»å‹
        if f {
            println!("bbb");
        }
    }
    ```

### å•å…ƒç±»å‹

Rust ä¸­å•å…ƒç±»å‹å°±æ˜¯ `()`ã€‚ä¾‹å¦‚ main å‡½æ•°è¿”å›çš„å°±æ˜¯å•å…ƒç±»å‹ã€‚å•å…ƒç±»å‹åœ¨æœ‰ç”¨çš„ã€‚

ä¾‹å¦‚ï¼Œæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼ˆä¾‹å¦‚ main å‡½æ•°ï¼‰å…¶è¿”å›çš„å°±æ˜¯å•å…ƒç±»å‹ã€‚

å†ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ `()` åšä¸º map çš„å€¼ï¼Œè¡¨ç¤ºä¸å…³å¿ƒ map çš„å€¼åªå…³å¿ƒ map çš„é”®ã€‚å°±åƒ Go ä¸­çš„ç©ºç»“æ„ä½“ `struct{}`ï¼Œå®Œå…¨ä¸å ç”¨å†…å­˜ã€‚



## å¤åˆç±»å‹

### å…ƒç»„ Tuple

å…ƒç»„æ˜¯ä¸€ç»„ {++æœ‰åºçš„ã€ä¸å¯å˜çš„++} å…ƒç´ çš„é›†åˆã€‚

å…ƒç»„å¯ä»¥å°†å¤šä¸ªç±»å‹çš„å¤šä¸ªå€¼æ”¾åœ¨ä¸€ä¸ªç±»å‹é‡Œã€‚

å…ƒç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸€æ—¦å£°æ˜å°±æ— æ³•æ”¹å˜ã€‚

- å…ƒç»„çš„å£°æ˜å½¢å¼ï¼š `(ç±»å‹1, ç±»å‹2, ...)`;
- å…ƒç»„çš„èµ‹å€¼å½¢å¼ï¼š `(å€¼1, å€¼2, ...)`;
- å…ƒç»„çš„è®¿é—®å½¢å¼ï¼š `å…ƒç»„åç§°.ä¸‹æ ‡`ï¼Œä½¿ç”¨ `.` è¿ç®—ç¬¦ã€‚

!!! example

    ```rust 
    fn main() {
        let tup: (i32, f64, u8) = (100, 3.14, 5);
        println!("{}, {}, {}", tup.0, tup.1, tup.2);
    }
    ```

å…ƒç»„å¯ä»¥è¢«è§£æ„ï¼Œä¾‹å¦‚:

```rust
let tup: (i32, f64, u8) = (100, 3.14, 5);
let (x, y, z) = tup;
```


### æ•°ç»„

æ•°ç»„æ˜¯ä¸€ç»„ {++æœ‰åºçš„ï¼Œå¯å˜çš„++} å…ƒç´ çš„é›†åˆã€‚

æ•°ç»„ä¸­çš„å€¼ç±»å‹å¿…é¡»ç›¸åŒã€‚

æ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸€æ—¦å£°æ˜å°±æ— æ³•æ”¹å˜ã€‚

- æ•°ç»„çš„å£°æ˜å½¢å¼: `[ç±»å‹; é•¿åº¦]`;
- æ•°ç»„çš„èµ‹å€¼å½¢å¼: `[å€¼1, å€¼2, ...]`;
- æ•°ç»„çš„è®¿é—®å½¢å¼: `æ•°ç»„[ä¸‹æ ‡]`ï¼Œä½¿ç”¨ `[]` è¿ç®—ç¬¦ã€‚

!!! example

    ```rust
    let a:[i64; 5] = [1, 2, 3, 4, 5];
    ```

å½“æ•°ç»„ä¸‹æ ‡è¶Šç•Œæ—¶ï¼ŒRust ç¼–è¯‘å™¨å¯ä»¥æ£€æŸ¥å‡ºç®€å•æƒ…å†µï¼Œä½†æ˜¯å¤æ‚æƒ…å†µå°±æ£€æŸ¥ä¸äº†ã€‚

ä¸€æ—¦æ•°ç»„ä¸‹æ ‡è¶Šç•Œï¼Œè¿è¡Œæ—¶ä¼šæŠ¥é”™ã€‚ï¼ˆruntime ä¼š panicï¼‰

ç®€å•æƒ…å†µï¼Œç¼–è¯‘å™¨èƒ½æ£€æŸ¥å‡ºæ¥ï¼š
```rust
fn main() {
    let arr: [i32; 5] = [10, 11, 12, 13, 14];

    let index = 10;
    let elem = arr[index];  // è¿™ç§æƒ…å†µç¼–è¯‘å™¨æ˜¯èƒ½æ£€æŸ¥å‡ºæ¥çš„
}
```

å¤æ‚æƒ…å†µï¼Œç¼–è¯‘å™¨ä¹Ÿæ— èƒ½ä¸ºåŠ›ï¼š
```rust
fn main() {
    let arr: [i32; 5] = [10, 11, 12, 13, 14];

    let index = [5, 7, 8];
    let elem = arr[index[1]];   // è¿™ç§æƒ…å†µç¼–è¯‘å™¨æ£€æŸ¥ä¸å‡ºæ¥çš„ï¼Œè¿è¡Œæ—¶ä¼š panic
}
```


### Range

Range æ˜¯ rust çš„ä¸€ç§è¯­æ³•ï¼Œä½¿ç”¨ `..` æ“ä½œç¬¦ã€‚

!!! example
    === "example1"

        ```rust
        fn main() {
            for i in 'a'..='e' {
                println!("{}",i);
            }
        }
        ```
        Output:
        ```
        a
        b
        c
        d
        e
        ```

    === "example2"

        ```rust
        fn main() {
            for elem in (1..4).rev() {
                println!("{}", elem);
            }
            println!("Lift Off!");
        }
        ```
        Output: 
        ```
        3
        2
        1
        Lift Off!
        ```
| expression                           | type                       | range                                 |
|--------------------------------------|----------------------------|---------------------------------------|
| start..end                           | std::ops::Range            | start <= x <  end                     |
| start..                              | std::ops::RangeFrom        | start <= x <= end                     |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..end  | std::ops::RangeTo          | &nbsp;&nbsp;&nbsp;&nbsp;0 <= x <  end |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..     | std::ops::RangeFull        | &nbsp;&nbsp;&nbsp;&nbsp;0 <= x <= end |
| start..=end                          | std::ops::RangeInclusive   | start <= x <= end                     |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..=end | std::ops::RangeToInclusive | &nbsp;&nbsp;&nbsp;&nbsp;0 <= x <= end |

```rust
let arr = [0, 1, 2, 3, 4];
assert_eq!(arr[ ..  ], [0, 1, 2, 3, 4]);
assert_eq!(arr[ .. 3], [0, 1, 2      ]);
assert_eq!(arr[ ..=3], [0, 1, 2, 3   ]);
assert_eq!(arr[1..  ], [   1, 2, 3, 4]);
assert_eq!(arr[1.. 3], [   1, 2      ]);
assert_eq!(arr[1..=3], [   1, 2, 3   ]);
```

## Vec

å‘é‡æ˜¯ä¸€ç»„ {++æœ‰åºçš„ï¼Œå¯å˜çš„++} å…ƒç´ çš„é›†åˆã€‚

å‘é‡å¯ä»¥ç›´æ¥å’Œæ•°ç»„æ¯”è¾ƒ

å‘é‡æœ‰ä»¥ä¸‹4ä¸­åˆ›å»ºæ–¹å¼ï¼š

1. `Vec::new()`: åˆ›å»ºç©ºçš„ vec
2. `Vec::with_capacity()`: åˆ›å»ºç©ºçš„ vec å¹¶æŒ‡å®šå®¹é‡
3. `vec![], vec!(), vec!{}`: é€šè¿‡å®åˆ›å»ºå¹¶åˆå§‹åŒ– vec
4. `vec![v;n], vec!(v;n), vec!{v,n}`: åˆ›å»ºå¹¶åˆå§‹åŒ– vec,å…±nä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½åˆå§‹åŒ–ä¸º v

```rust
fn main() {
    let mut v1 = Vec:new();
    v1.push(1); // è¿½åŠ æ—¶æ ¹æ®å…ƒç´ æ¨å¯¼ v1 çš„æ•°æ®ç±»å‹ä¸º Vec<i32>
    v1.push(2);
    v1.push(3);
    v1.push(4);
    assert_eq!(v1, [1, 2, 3, 4])    // vec å¯ä»¥ç›´æ¥å’Œæ•°ç»„æ¯”è¾ƒ

    let v2 = Vec::with_capacity(10);
    let v3 = vec![1, 2, 3, 4];

    let v3 = vec![3; 4];    // ç­‰ä»·äº vec![3, 3, 3, 3]
    let v3 = vec!(3; 4);    // ç­‰ä»·äº vec!(3, 3, 3, 3)
    let v3 = vec!{3; 4};    // ç­‰ä»·äº vec!{3, 3, 3, 3}
}
```

å‘é‡æœ‰å¤šç§è®¿é—®å…ƒç´ çš„æ–¹å¼ï¼š

1. `v[ä¸‹æ ‡]`: ä¸­æ‹¬å·è¿ç®—ç¬¦çš„æ–¹å¼ã€‚è¿™ç§æ–¹å¼å½“ä¸‹æ ‡è¶Šç•Œæ—¶å°†==ä¼š== panic
2. `v.get(ä¸‹æ ‡)`: get æ–¹æ³•ï¼Œè¿™ç§è¿”å› vec ä¸­æŒ‡å®šä¸‹æ ‡å…ƒç´ çš„ä¸å¯å˜å¼•ç”¨ï¼Œä¸‹æ ‡è¶Šç•Œæ—¶==ä¸ä¼š== panicï¼Œä¼šè¿”å› None
3. `v.get_mut(ä¸‹æ ‡)`: get æ–¹æ³•ï¼Œè¿™ç§è¿”å› vec ä¸­æŒ‡å®šä¸‹æ ‡å…ƒç´ çš„å¯å˜å¼•ç”¨ï¼Œä¸‹æ ‡è¶Šç•Œæ—¶==ä¸ä¼š== panicï¼Œä¼šè¿”å› None
4. `v.pop()`: pop æ–¹æ³•ï¼Œéšæœºè¿”å›ä¸€ä¸ªå¹¶ç§»é™¤å…ƒç´ 

```rust
fn main() {
    let v = vec![1, 2, 3, 4];
    let n: usize = 3;

    // ä½¿ç”¨ä¸­æ‹¬å·è¿ç®—ç¬¦è®¿é—®ï¼Œä¸‹æ ‡è¶Šç•Œæ—¶ä¼š panic
    println!("{}, {}", v[0], v[n]);
    // println!("{}", v[9]);

    // ä½¿ç”¨ get æ–¹æ³•
    println!("{}", v.get(0));

    // ä½¿ç”¨ get_mut æ–¹æ³•
    println!("{}", v.get_mut(0));
}
```

éå† vecï¼š
```rust
fn main() {
    let v = vec![1, 2, 3, 4];

    for i in &v { .. }      // è·å¾—å¼•ç”¨
    for i in &mut v { .. }  // è·å¾—å¯å˜å¼•ç”¨
    for i in v { .. }       // è·å¾—æ‰€æœ‰æƒï¼Œæ­¤æ—¶vçš„æ‰€æœ‰æƒå°†ä¼šå˜åŠ¨
}
```